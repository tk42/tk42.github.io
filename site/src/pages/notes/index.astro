---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Feed from "@/components/Feed.astro";
import Search from "@/components/Search.astro";
import { getCollection } from "astro:content";

const allNotes = await getCollection("notes");
const sortedNotes = allNotes.sort((a, b) => {
  const da = a.data.date || "";
  const db = b.data.date || "";
  return db.localeCompare(da);
});

const entries = sortedNotes.map((note) => ({
  title: note.data.title,
  url: `/notes/${note.slug}`,
}));
---

<BaseLayout title="Notes">
  <div class="page-content">
    <h5 class="meta-title"><a href="/">â† Home</a></h5>
    <div class="jumbo">Notes</div>
    <Search />
    <Feed entries={entries} format="row" />
  </div>
</BaseLayout>
